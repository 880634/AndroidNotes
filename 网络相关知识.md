---
title: 网络基础知识
date: 2016-05-09 11:07:57
categories: Android 
tags: 网络
---

  
# 基础

ISO七层协议(由下往上)：物理层，数据链路层，网络层，传输层，会话层，表示层，应用层

<!--more-->

IP协议对应于网络层，TCP和UDP协议属于传输层 。而http是个应用层的协议，它实际上也建立在TCP协议之上。socket则是对TCP/IP协议的封装和应用。也可以说，TPC/IP协议是传输层协议，主要解决数据如何在网络中传输，而HTTP是应用层协议，主要解决如何包装数据。

网络编程的目的就是直接或间接地通过网络协议与其他计算机进行通讯。

网络编程中有两个主要的问题，一个是如何准确的定位网络上一台或多台主机；另一个就是找到主机后如何可靠高效的进行数据传输。目前使用最广泛的因特网协议是TCP/IP协议。

在TCP/IP协议中IP层主要负责网络主机的定位，数据传输的路由，由IP地址可以唯一地确定Internet上的一台主机。而TCP层则提供面向应用的可靠的或非可靠的数据传输机制，这是网络编程的主要对象，一般不需要关心IP层是如何处理数据的。


# TCP和UDP

TCP协议：可靠的传输协议，TCP连接的建立需要通过三次握手(见后面)才行，而且它的传输是可靠的，因为它传输的数据能够毫无差错的到达客户端。在发送和接收数据时都要计算和校验，当数据包不对或者长时间没有收到数据包的话，就会请求服务端进行重传

UDP协议：不可靠传输协议，UDP的传输只需要通过服务端进行端口监听就行了，UDP包不需要通过三次握手什么的，只需要客户端指定服务端的IP地址，监听端口号就行了，UDP协议不保证数据包中的数据是否正确，和数据包到达的顺序等，到达了，即使是错误的也会接收，没到达也不会请求服务端进行重传，所以通常语音或者视频的时候，用的都是UDP协议，而不会使用TCP协议，因为即使丢失了一部分数据，还是可以进行比较流畅的功能。所以UDP和TCP协议使用的场所不同，各有好坏

比较：

TCP：可靠的，面向连接的传输机制，提供了可靠的字节流保证了数据包中数据的完整无损，并且数据包可以按顺序到达。因为数据包的按顺序到达与准确无误，所以它所需要的时间较长。

UDP：不可靠的，非面向连接的传输机制，它不检查数据包是否已经到达目的地，并且不保证它们按顺序到达。因为数据包可以不按顺序到达，并且不需要检测是否正确，所以它传输速度快。在数据链路层的时候，如果冗余码不对的话，就会丢弃数据包，无论是UDP还是TCP协议，都会丢弃数据包，只不过TCP协议会请求重传，而UDP协议不会。


# HTTP
http（超文本传输协议）是一个基于请求与响应模式的、无状态的、应用层的协议，常基于TCP的连接方式。  

HTTP协议是一种请求响应的协议，B/S就是这样，浏览器发起一个HTTP请求，向服务器请求通过HTTPGET或者HTTPPOST请求，来请求或者传递数据，服务器会返回请求结果，这就是所谓的请求响应。  

HTTP协议的主要特点是：

- 支持客户/服务器模式。
- 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。由于HTTP协议简单，通信速度很快。
- 灵活：HTTP允许传输任意类型的数据对象。类型由Content-Type加以标记。
- 无连接：即每次连接只处理一个请求，处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
- 无状态：无状态是指协议对于事务处理没有记忆能力。 
- http1.0协议默认的是非持久连接， HTTP1.1默认的连接方式为持久连接。

非持久连接：每次服务器发出一个对象后，相应的TCP连接就被关闭，也就是说每个连接都没有持续到可用于传送其他对象。每个TCP连接只用于传输一个请求消息和一个响应消息。

持久连接：服务器在发出响应后让TCP连接继续打开着。同一对客户/服务器之间的后续请求和响应可以通过这个连接发送。HTTP/1.1的默认模式使用带流水线的持久连接。


# Https协议

HTTPS（全称：Hypertext Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道，简单讲是HTTP的安全版。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。 它是一个URI scheme（抽象标识符体系），句法类同http:体系。用于安全的HTTP数据传输。https:URL表明它使用了HTTP，但HTTPS存在不同于HTTP的默认端口及一个加密/身份验证层（在HTTP与TCP之间）。被广泛用于万维网上安全敏感的通讯，例如交易支付方面。


## 更多

更多关于Http的知识看<http://www.jianshu.com/p/e544b7a76dac>

# 一些概念

网络架构主要有两种模式B/S,C/S 

- B/S----》就是浏览器/服务器端模式了，通过应用层的HTTP协议通信，不需要特定客户端软件，而是需要统一规范的客户端，简而言之就是Android网络浏览器（如chrome,UcWeb，QQ浏览器等等）访问web服务器端的方式了。
- C/S-----》就客户端/服务器端模式，通过任意的网络协议通信，需要特定的客户端软件。
 

服务器端返回客户端的内容有三种方式：

- a）以HTML代码的形式返回。
- b）以XML字符串的形式返回，返回的数据需要通过XML解析（SAX、DOM，Pull,等）器进行解析
- c）以json对象的方式返回。

什么是TCP连接的三次握手

- 第一次握手：客户端发送syn包(syn=j)到服务器，并进入SYN_SEND状态，等待服务器确认；
- 第二次握手：服务器收到syn包，必须确认客户的SYN（ack=j+1），同时自己也发送一个SYN包（syn=k），即SYN+ACK包，此时服务器进入SYN_RECV状态；
- 第三次握手：客户端收到服务器的SYN＋ACK包，向服务器发送确认包ACK(ack=k+1)，此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手。


握手过程中传送的包里不包含数据，三次握手完毕后，客户端与服务器才正式开始传送数据。理想状态下，TCP连接一旦建立，在通信双方中的任何一方主动关闭连接之前，TCP 连接都将被一直保持下去。断开连接时服务器和客户端均可以主动发起断开TCP连接的请求，断开过程需要经过“四次握手”（过程就不细写了，就是服务器和客户端交互，最终确定断开）
